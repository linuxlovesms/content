{name}Сатья Наделла{/name}{company}Microsoft{/company}{title}Гостевая ОС и Integration Services{/title}{cat}Облачные решения{/cat}
Сегодня - про то, как Microsoft разрабатывает необходимые для работы Linux и FreeBSD программное обеспечение. 

# Гостевая ОС и Integration Services  #

Частый вопрос - что можно запустить на Hyper-V? 
Проще всего ответить на него картинкой. 

![](https://habrastorage.org/files/21b/475/3a6/21b4753a607049a09ddff87c6293bb5b.png)

Hyper-V - гипервизор для Intel/AMD x86/x64, поэтому основным требованием для гостевой ОС является возможность ее запуска на данных архитектурах. AIX, например, написан для IBM POWER (PowerPC), поэтому запустить ее на Hyper-V не получится. То же самое, между тем, актуально для других гипервизоров для x86/x64, например, VMWare ESX - там AIX работать тоже не будет.
ОС работает на x86/x64? Переходим к следующему вопросу - есть ли для этой ОС Integration Services? IS - это тесная интеграция с гипервизором, позволяющая достигать большей производительности и степени управляемости. Концептуально, IS это набор драйверов для устройств для гостевой ОС, совместимых с синтетическими устройствам и Hyper-V - или оборудованием, которое видно гостевой ОС. Также, как физическим устройствам, синтетическим нужны драйвера, разработанные для конкретных ОС - по этой причине есть драйвера для Windows, Linux и FreeBSD, составляющие IS. IS имеют литеру ОС, для которой они разработаны - L(Linux)IS и B(FreeBSD)IS. Другие же x86/x64 ОС (Solaris x86, например), смогут работать в Hyper-V в emulated mode, но ограничения этого режима делают подобное развертывание неподходящим для большинства продакшн-сред. 

## Разработка LIS ##

LIS разрабатываются программистами на С внутри Microsoft, однако процессы разработки отличаются от собственных продуктов Microsoft. Разработчики участвуют в сообществе вокруг ядра Linux и отправляют обновления и багфиксы во всем известный Linux Kernel Mailing List – см. http://lkml.org. Дальше все это проверятся сообществом, пишутся комментарии, предлагаются советы по доработке или просто обратная связь вида "все неправильно". Комментарии и советы используются для улучшения кода и в конце концов код попадает в ядро Linux. Как только это случается, начинается работа с ключевыми вендорами дистрибутивов для проверки кода в конкретных случаях - обычно эти дистрибутивы используют более ранние версии ядра Linux, поэтому часто требуется что-то дописать или переписать, чтобы все заработало. Для этого в месяц проходит масса созвонов с каждым из вендоров с обсуждением технических проблем, багов и того, что удалось достичь. Когда процесс разработки заканчивается, происходит сертификация решения - например, [Red Hat Enterprise Linux on Hyper-V](https://hardware.redhat.com/&quicksearch=Microsoft).

![](https://habrastorage.org/files/919/66c/c16/91966cc160f949fab7f376089f5dd6a3.png)

## Установка LIS  ##

Когда вы ставите дистрибутив Linux на Hyper-V, IS уже в комплекте. Но, разумеется, в процессе работы с вендорами иногда происходят задержки, и на рынке могут быть представлены версии, не включающие пока последних изменений. По этой причине Microsoft предоставляет standalone-версию LIS, которую можно использовать с некоторыми дистрибутивами (включая старые, в которые не интегрирован LIS) - здесь. 

## Разработка BIS ##

Разрабатывая BIS, разработчики следуют похожему на LIS процессу - отправляя код в сообщество FreeBSD, реагируя на обратную связь и в конце процесса интегрируя его в кодовую базу FreeBSD. Один из разработчиков в команде Microsoft имеет права commiter в сообществе, что делает его частью группы, которая управляет кодовой базой FreeBSD. Отличие FreeBSD от Linux в том, что отдельных дистрибутивов нет, все выпускается прямо сообществом и доработки кода не требуется, что упрощает процесс интеграции BIS.
Дистрибутивы и версии Linux/FreeBSD 
Microsoft сконцентрирован на том, чтобы дать возможность использовать Hyper-V с Linux в продакшн-среде в датацентре. Для FreeBSD, основной фокус на вендорах, которые используют FreeBSd как основную систему. Так как жизненный цикл разработки LIS и BIS привязан к соответствующим сообществам и вендорам, их обновления не выравниваются на релизный цикл Windows Server/Hyper-V и выходят более часто, поэтому понимание того, что предлагается в различных версиях, не всегда является простым процессом. Для того, чтобы облегчить эту задачу, на Microsoft TechNet выложена документация по поддерживаемым дистрибутивам: 

- 	Red Hat Enterprise Linux
- 	CentOS
- 	SUSE Linux Enterprise Server
- 	Ubuntu Server
- 	Debian Server
- 	Oracle Linux

Документация обновляется с привязкой к выходу новых дистрибутивов и/или выходу новых фич LIS/BIS. 
Резюме
Linux и FreeBSD отлично работают на Hyper-V. Для этого Microsoft плотно сотрудничает с сообществами Linux и FreeBSD и экосистемой вендоров дистрибутивов. В следующей статье посмотрим на конкретные фичи Hyper-V, которые вы можете использовать для Linux/FreeBSD как гостевых ОС. 

Оригинал - [http://blogs.technet.com/b/server-cloud/archive/2015/09/22/microsoft-loves-linux-deep-dive-1-introduction-to-linux-and-freebsd-on-hyper-v.aspx](http://blogs.technet.com/b/server-cloud/archive/2015/09/22/microsoft-loves-linux-deep-dive-1-introduction-to-linux-and-freebsd-on-hyper-v.aspx "Microsoft Loves Linux Deep Dive #2: Linux and FreeBSD Integration Services Core Features") 
